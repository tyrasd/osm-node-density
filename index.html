<!DOCTYPE html>
<html>
<head>
    <title>OpenStreetMap node density</title>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"></script>
    <script src="leaflet-fullHash.js"></script>
</head>
<body>
    <div id="map" style="position:absolute; left:0; right:0; top:0; bottom:0; background-color:black;"></div>

    <script>
        var map = L.map('map', {maxZoom:7, minZoom:0}).setView([38,13], 2);
        var attr = 'data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://openstreetmap.org/copyright">ODbL</a>, Imagery Â© <a href="https://www.openstreetmap.org/user/tyr_asd/">Martin Raifer</a>, <a href="https://creativecommons.org/licenses/by/3.0/">cc-by</a>';
        var density2014 = L.tileLayer('https://tyrasd.github.io/osm-node-density/2014/tiles/density/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2015 = L.tileLayer('https://tyrasd.github.io/osm-node-density/2015/tiles/density/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2015 = L.tileLayer('https://tyrasd.github.io/osm-node-density/2015/tiles/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2016 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2016/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2016 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2016/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2017 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2017/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2017 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2017/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2018 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2018/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2018 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2018/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2019 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2019/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2019 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2019/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2020 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2020/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2020 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2020/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            density2021 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2021/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            diff2021 = L.tileLayer('https://s3-eu-west-1.amazonaws.com/osm-node-density/2021/diff/{z}/{x}/{y}.png', {
            maxNativeZoom: 7,
            attribution: attr
        }),
            overlay = L.tileLayer('https://api.mapbox.com/styles/v1/openstreetmap/ckasmteyi1tda1ipfis6wqhuq/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidHlyIiwiYSI6ImNpcTdyZWQwbjAwMmhoeW5zbXc1enJ3cWoifQ.094oUYlT0wZbf2Q2wM-QQQ', {
            opacity: 0.75,
            attribution: 'overlay &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a>'
        });
        L.control.layers({
            "density 2021": density2021,
            "difference 2020-2021": diff2021,
            "density 2020": density2020,
            "difference 2019-2020": diff2020,
            "density 2019": density2019,
            "difference 2018-2019": diff2019,
            "density 2018": density2018,
            "difference 2017-2018": diff2018,
            "density 2017": density2017,
            "difference 2016-2017": diff2017,
            "density 2016": density2016,
            "difference 2015-2016": diff2016,
            "density 2015": density2015,
            "difference 2014-2015": diff2015,
            "density 2014": density2014
        }, {
            "locations":overlay
        }).addTo(map);
        density2021.addTo(map);
        overlay.addTo(map);
        var hash = new L.Hash(map, {
            "latest": density2021,
            //"2021": density2021,
            "2020-2021": diff2021,
            "2020": density2020,
            "2019-2020": diff2020,
            "2019": density2019,
            "2018-2019": diff2019,
            "2018": density2018,
            "2017-2018": diff2018,
            "2017": density2017,
            "2016-2017": diff2017,
            "2016": density2016,
            "2015-2016": diff2016,
            "2015": density2015,
            "2014-2015": diff2015,
            "2014": density2014,
            "places":overlay
        });
        L.control.scale({metric:true, imperial:false}).addTo(map);
    </script>

    <script>
        setTimeout(function() {
            var script = document.createElement('script');
            script.asnyc = 'async';
            script.src = 'https://unpkg.com/leaflet.gridlayer.fadeout@0.1.0/Leaflet.GridLayer.FadeOut.js';
            document.getElementsByTagName('head')[0].appendChild(script);
        }, 2000);
    </script>
</body>
</html>
